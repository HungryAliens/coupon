import{getLanguageData}from"./i18n.js";const _ENDPOINTS={EARTH:"https://hungryaliens.detailgames.com",MARS:"https://hungryaliens-mars.detailgames.com",VENUS:"https://hungryaliens-venus.detailgames.com",PLUTO:"https://hungryaliens-pluto.detailgames.com",JUPITER:"https://hungryaliens-jupiter.detailgames.com",DEV:"http://hungryalien-dev.detailgames.com"},_API="/api/Game/SubmitCoupon/";export const SERVER_NAMES=Object.keys(_ENDPOINTS);Object.freeze(_ENDPOINTS),Object.freeze(_API),Object.freeze(SERVER_NAMES);export async function requestRedeem(e,t,r){const n=getLanguageData();if(!_isValidServerName(e))return`${n.invalidServerName}\n[${e}]`;if(!_isValidEmail(t))return`${n.invalidAccountName}\n[${t}]`;if(!r)return"Enter CouponCode";const a=_ENDPOINTS[e],i={CouponId:r,AccountName:t,ServiceName:e};try{const e=await fetch(a+_API,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(e.ok){const t=await e.json();return 0==t.resultCode?n.success:2==t.resultCode?n.invalidCouponCode:3==t.resultCode?n.invalidAccountName:n.failure}if(400===e.status){const t=await e.json();return`${n.failure}\n[${n[t.errorCode]||n.serverError}]`}return n.serverError}catch(e){return n.networkError}}function _isValidServerName(e){return SERVER_NAMES.includes(e)}function _isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}